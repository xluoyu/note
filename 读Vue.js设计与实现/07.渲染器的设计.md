<!--
 * @Description: 
 * @Author: xluoyu
 * @LastEditTime: 2022-08-14 15:39:57
-->
## VNode

为了通过`JS`代码更方便的操作`DOM`，我们采用JS对象的方式来描述UI，也就是所谓的虚拟DOM。

我们会使用`render`函数使用虚拟DOM来描述UI

```js
{
  render() {
    return h('div', {
      class: 'box'
    }, '这是个盒子')
  }
}
```

来看看这段代码都会做些什么。

* `h(type, props, children)`，`h`函数作为创建`VNode`的入口，将三个重要的参数传递给`createVNode`。
* `createVNode(type, props, children)`，顾名思义，它会对所传入的各项参数做出处理。
  
  针对`type`，我们要判断`type`的类型
  1. `string`类型，这时`type`所代表的就是用户所要创建的标签，比如`div`、`p`等
  2. `Text`， `Text`是我们内部创建的一种类型，它代表的是文本节点
  3. `Fragment`，`Fragment`也是我们创建的类型，它不具有任何节点属性
  ...

  之后我们需要对`props`做出处理，比如说我们要对`class`做出单独编译，`class`可能会有三种形式
  * `class: 'boo foo'` 字符串类型
  * `class: {boo: true, foo:false}` 对象类型
  * `class: ['boo', {foo: false}]` 混合类型

  我们通过`normalizeClass`函数，将这三种形式都转化成字符串，方便后续操作。此外还有`style`属性也是同理

  对于`children`也需要做出一些处理，但此阶段我们还并未探讨。
* `render()`, 此函数则是`VNode`的导出函数。

最后我们就会得到如下形式的`VNode`对象

```json
{
  type: "div",
  props: {
    class: "box"
  },
  el: null, // 这个VNode会生成的真实DOM，会在后续代码中写入值
  children: "这是个盒子",
  shapeFlag: ShapeFlag.Tag // 用于描述VNode类型
  ...
}
```

## 渲染器

我们了解了`VNode`，那么渲染器的工作就是将`VNode`渲染成真实DOM。

### 结构


